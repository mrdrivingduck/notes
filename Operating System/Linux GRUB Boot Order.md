# Linux - GRUB Boot Order

Created by : Mr Dk.

2019 / 09 / 15 10:55

Nanjing, Jiangsu, China

---

## About

æ”¹ä¸€ä¸‹åŒç³»ç»Ÿçš„é»˜è®¤å¯åŠ¨é¡ºåºã€‚æˆ‘çš„å¤§æœ¬æœ¬è£…ç€ Windows 10 + Ubuntu 18.04 çš„åŒç³»ç»Ÿï¼Œæ¯æ¬¡å¯åŠ¨æ—¶ï¼Œå¦‚æœä¸äººä¸ºé€‰æ‹©ï¼ŒGRUB è¶…æ—¶åè‡ªåŠ¨å¯åŠ¨ Ubuntuã€‚æœ‰æ—¶å€™æˆ‘äººä¸åœ¨ç”µè„‘è¾¹ï¼Œå¼€ç€ Windowsï¼Œä½†å®ƒå› ä¸º Windows Update è‡ªåŠ¨é‡å¯äº†ï¼Œç»“æœç»™æˆ‘é‡å¯åˆ° Ubuntu é‡Œé¢å»äº†......

äººåœ¨å¤–é¢çš„æˆ‘ï¼Œæƒ³è¿ Windows çš„è¿œç¨‹æ¡Œé¢ï¼šï¼Ÿï¼Ÿï¼Ÿç½‘æ–­äº†ï¼Ÿï¼Ÿï¼Ÿ ğŸ˜‚ å›åˆ°å®éªŒå®¤å‘ç°ï¼Œå“¦ï¼Œç”µè„‘å·²ç»åœ¨ Ubuntu çš„ç™»å½•ç•Œé¢ç­‰ç€äº†ã€‚

---

## GRUB Default Boot Order

ç†è®ºä¸Šåº”å½“æƒ³åˆ°ï¼Œè¦æ”¹ GRUB çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ GRUB çš„é…ç½®æ–‡ä»¶æ˜¯ç”Ÿæˆçš„ï¼Œä¸å»ºè®®æ‰‹åŠ¨ä¿®æ”¹ï¼š

```bash
$ sudo vim /boot/grub/grub.cfg
```

```
#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
```

æ‰€ä»¥å·²ç»æœ‰äº†æç¤ºï¼Œéœ€è¦ç¼–è¾‘ `/etc/grub.d` å’Œ `/etc/default/grub`

```bash
$ cd /etc/grub.d
$ ls
00_header        10_linux      20_memtest86+  30_uefi-firmware  41_custom
05_debian_theme  20_linux_xen  30_os-prober   40_custom         README
$ vim README
```

```

All executable files in this directory are processed in shell expansion order.

  00_*: Reserved for 00_header.
  10_*: Native boot entries.
  20_*: Third party apps (e.g. memtest86+).

The number namespace in-between is configurable by system installer and/or
administrator.  For example, you can add an entry to boot another OS as
01_otheros, 11_otheros, etc, depending on the position you want it to occupy in
the menu; and then adjust the default setting via /etc/default/grub.
```

æ‰€ä»¥ï¼Œ`/etc/grub.d` ç›®å½•ä¸‹éƒ½æ˜¯äº›å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ²¡ä»€ä¹ˆå¥½æ”¹çš„ã€‚åªéœ€è¦åœ¨ `/etc/default/grub` ä¸­è°ƒæ•´é»˜è®¤å¯åŠ¨é¡ºåºå°±å¥½äº†ï¼š

```bash
$ sudo vim /etc/default/grub
```

```
# If you change this file, run 'update-grub' afterwards to update
# /boot/grub/grub.cfg.
# For full documentation of the options in this file, see:
#   info -f grub -n 'Simple configuration'

GRUB_DEFAULT=2
GRUB_TIMEOUT_STYLE=hidden
GRUB_TIMEOUT=0
GRUB_DISTRIBUTOR=`lsb_release -i -s 2> /dev/null || echo Debian`
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
GRUB_CMDLINE_LINUX=""

# Uncomment to enable BadRAM filtering, modify to suit your needs
# This works with Linux (no patch required) and with any kernel that obtains
# the memory map information from GRUB (GNU Mach, kernel of FreeBSD ...)
#GRUB_BADRAM="0x01234567,0xfefefefe,0x89abcdef,0xefefefef"

# Uncomment to disable graphical terminal (grub-pc only)
#GRUB_TERMINAL=console

# The resolution used on graphical terminal
# note that you can use only modes which your graphic card supports via VBE
# you can see them in real GRUB with the command `vbeinfo'
#GRUB_GFXMODE=640x480

# Uncomment if you don't want GRUB to pass "root=UUID=xxx" parameter to Linux
#GRUB_DISABLE_LINUX_UUID=true

# Uncomment to disable generation of recovery mode menu entries
#GRUB_DISABLE_RECOVERY="true"

# Uncomment to get a beep at grub start
#GRUB_INIT_TUNE="480 440 1"
```

å…¶ä¸­ï¼Œ`GRUB_DEFAULT` åŸå…ˆä¸º `0`ï¼Œå¯¹åº”æˆ‘çš„æœ¬æœ¬ä¸Šçš„ Ubuntuã€‚Window Boot Manager (å³ Windows) åœ¨ GRUB åˆ—è¡¨ä¸Šä¸ºç¬¬ä¸‰ä¸ªï¼Œå› æ­¤å°†è¿™ä¸ªå€¼ä¿®æ”¹ä¸º `2`ã€‚

æ ¹æ®è¯¥æ–‡ä»¶ä¸­çš„è¯´æ˜ï¼Œä¿®æ”¹è¯¥æ–‡ä»¶åï¼Œéœ€è¦è¿è¡Œ `update-grub` æ¥ç”Ÿæˆæœ€ç»ˆçš„ GRUB é…ç½®æ–‡ä»¶ `/boot/grub/grub.cfg`ï¼š

```bash
$ sudo update-grub
Sourcing file `/etc/default/grub'
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-4.15.0-63-generic
Found initrd image: /boot/initrd.img-4.15.0-63-generic
Found linux image: /boot/vmlinuz-4.15.0-62-generic
Found initrd image: /boot/initrd.img-4.15.0-62-generic
Found linux image: /boot/vmlinuz-4.15.0-60-generic
Found initrd image: /boot/initrd.img-4.15.0-60-generic
Found Windows Boot Manager on /dev/nvme0n1p2@/EFI/Microsoft/Boot/bootmgfw.efi
Adding boot menu entry for EFI firmware configuration
done
```

é‡å¯ä¹‹åï¼Œåœ¨ GRUB ä¸­é»˜è®¤è¿›å…¥ Windows äº†è¯¶~ ğŸ˜

---

