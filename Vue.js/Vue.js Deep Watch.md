# Vue.js - Deep Watch

Created by : Mr Dk.

2019 / 03 / 19 10:59

Nanjing, Jiangsu, China

---

## About

å¯¹äº Vue.js ä¸­çš„ `watch` å±æ€§çš„ä¸€äº›é«˜çº§ç”¨æ³•

è¯¥å±æ€§ç”¨äºå“åº”æŸä¸ªæ•°æ®çš„å˜åŒ–

åœ¨ä¾¦å¬åˆ°æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨å¯¹åº”çš„å‡½æ•°

> å…è®¸æ‰§è¡Œå¼‚æ­¥æ“ä½œ (è®¿é—®ä¸€ä¸ª API)ï¼Œé™åˆ¶æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€

```javascript
watch: {
    someVal: function (newVal, oldVal) {
        // TO DO ...
    }
}
```

---

## Handler

`watch` çš„ `handler` å±æ€§ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹å¯ä»¥ç®€å†™

å› ä¸ºä¸Šè¿°çš„ `watch` ä¸­åªæœ‰ `handler` ä¸€ä¸ªå±æ€§

åœ¨ä¸Šé¢çš„ä»£ç å—ä¸­ï¼Œç¼–è¯‘åå…¶å®å°±æ˜¯ä¸€ä¸ª handler

å¦‚æœåœ¨ `watch` ä¸­è¿˜éœ€è¦ä½¿ç”¨ä¸‹æ–‡å™è¿°çš„å…¶å®ƒå±æ€§

`handler` å°±è¦ä½œä¸º `watch` çš„ä¸€ä¸ªå±æ€§è¢«æ˜¾å¼å£°æ˜äº†

---

## Immediate

`watch` çš„ç‰¹ç‚¹æ˜¯ï¼Œåœ¨æœ€åˆç»‘å®šæ—¶æ˜¯ä¸ä¼šæ‰§è¡Œçš„

åªæœ‰åœ¨ä¾¦å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šè¢«è°ƒç”¨

å¦‚æœå¸Œæœ›åœ¨ `watch` ä¸­å£°æ˜åå…ˆè°ƒç”¨ä¸€æ¬¡ `handler`

éœ€è¦ä½¿ç”¨ `immediate: true` å±æ€§

```javascript
watch: {
    someVal: {
        handler: function (newVal, oldVal) {
            // TO DO ...
        },
        immediate: true
    }
}
```

---

## Deep

æ·±åº¦ç›‘å¬ - å¦‚æœç›‘å¬çš„æ˜¯ä¸€ä¸ªå¯¹è±¡

é»˜è®¤æƒ…å†µä¸‹ Vue.js ä¸ä¼šå“åº”å¯¹è±¡å±æ€§çš„å˜åŒ–

åªä¼šå“åº”å¯¹è±¡å¼•ç”¨çš„å˜åŒ–

* å³åªæœ‰ç»™è¯¥å¯¹è±¡é‡æ–°èµ‹å€¼çš„æ—¶å€™æ‰ä¼šè¢«ç›‘å¬åˆ°
* è¯¥å¯¹è±¡çš„æŸå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ä¸ä¼šè¢«ç›‘å¬åˆ°

ä½¿ç”¨ `deep: true` å±æ€§è¿›è¡Œ __æ·±å…¥è§‚å¯Ÿ__ ğŸ˜

* ç›‘å¬å™¨å°†ä¼šå±‚å±‚å‘ä¸‹éå†ï¼Œç»™æ‰€æœ‰å±æ€§åŠ ä¸Šç›‘å¬å™¨
* æ€§èƒ½å¼€é”€è¾ƒå¤§

```javascript
watch: {
    someVal: {
        handler: function (newVal, oldVal) {
            // TO DO ...
        },
        deep: true
    }
}
```

ä¼˜åŒ–ï¼š__ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼çš„ç›‘å¬__

* ç›‘å¬å™¨å°†å±‚å±‚å‘ä¸‹è§£æï¼Œç›´åˆ°é‡åˆ°ç›¸åº”çš„å±æ€§ï¼Œå¹¶è®¾ç½®ç›‘å¬å‡½æ•°

> å’‹ç½‘ä¸Šæ²¡å‡ ä¸ªäººç”¨è¿™ç§æ–¹æ³•å‘¢ï¼Ÿ
>
> ä¸‹æ¬¡å†éªŒè¯å§
>
> å¦‚æœè¯´å¯¹æ€§èƒ½çœŸçš„æœ‰ä¼˜åŒ–
>
> é‚£ç¡®å®ä¸é”™

ç›‘å¬ `dataObj` å¯¹è±¡çš„ `property` å±æ€§ï¼š

```javascript
watch: {
    'dataObj.property': function(newVal, oldVal) {
        // TO DO ...
    }
}
```

---

## Summary

éšç€å¼€å‘çš„å±‚æ¬¡æ¸è¿›

é‡åˆ°çš„ç”¨æ³•ä¹Ÿè¶Šæ¥è¶Šé«˜çº§äº†

æ“æ‰‹æ‰‹~~ ğŸ˜€

---

